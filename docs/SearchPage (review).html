<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="SearchPage (review).css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.83/dist/themes/light.css" />
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.83/dist/shoelace.js"></script>
  </head>
  <body>
    <div class="SearchPage_review">
      <div class="entire-area">

        <div class="header">
          <div class="div1">
            <a class="web-name" href="MainPage (user).html">Snowmap</a>
          </div>
          <div class="bottom-app-bar">
            <img id="search-img" src="image/search.png" />
            <input type="text" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="search-form"></input>
             <button type="button" class="btn btn-dark" id="search-btn" >ê²€ìƒ‰</button>
          </div>
          <div class="button-group" id="buttonGroup"></div>

          <!-- â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  ì¶”ê°€ â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  -->
          <div class="mobile-button-group">
            <!-- í–„ë²„ê±° ë²„íŠ¼ -->
            <button class="mobile-button btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu">
              <div class="navbar-toggler-icon"></div>
            </button>

            <!-- Offcanvas ë©”ë‰´ -->
            <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
              <div class="offcanvas-close-area">
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
              </div>
              <div class="offcanvas-header">
                <div class="offcanvas-title" id="mobileMenuLabel">
                  <a class="account-inf-mobile" href="MyPage (check).html">
                    <img src="image/avatar.png" alt="ë“±ê¸‰" id="grade-img-mobile"/>
                    <div class="account-detail-nickname">ë‹‰ë„¤ì„&nbsp;</div>
                    <div>&nbsp;&gt;</div>
                  </a>
                </div>
              </div>
              
              <div class="offcanvas-body">
                <ul class="list-unstyled">
                  <hr/>
                  <li><a href="ì»¤ë®¤ë‹ˆí‹°.html">ì»¤ë®¤ë‹ˆí‹°</a></li>
                  <hr/>
                  <li><a href="ë­í‚¹.html">ë­í‚¹</a></li>
                  <hr/>
                  <li><a href="MyPage (check)?tab=wishlist">ì°œí•œ ê°€ê²Œ</a></li>
                  <hr/>
                </ul>
              </div>
              <div style="text-align: right;">
                <button id="logout-button" class="button" onclick="logout()">
                  <img class="logout-img" src="image/logout.png">
                  <span class="logout-text">ë¡œê·¸ì•„ì›ƒ</span>
                </button>
              </div>
            </div>
          </div>
          <!-- â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  ì¶”ê°€ ì™„ë£Œ â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  -->
        </div>
  
        <div class="aside"></div>

       
        <!--ì—¬ê¸°ë¶€í„° ë³µë¶™ì‹œì‘-->
        <div class="aside2">
          <div class="simple-ranking">
            <ul class="nav nav-pills">
              <li class="nav-item">
                <a class="nav-link active"  data-bs-toggle="pill" aria-current="page" href="#" onclick="handleSortAside('rating')">
                  ë³„ì ìˆœ</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-bs-toggle="pill" href="#" onclick="handleSortAside('reviews')">ë¦¬ë·°ìˆœ</a>
              </li>
              <li class="nav-item">
                <a class="nav-link"  data-bs-toggle="pill" href="#" onclick="handleSortAside('bookmark')">ë‹¨ê³¨ìˆœ</a>
              </li>
              
            </ul>
            <ul id="itemList">
            </ul>
            <div id="store-sort"> <!--ì—¬ê¸°ì— ê°„ë‹¨ ë­í‚¹ ì •ë ¬í•´ì„œ ì‚½ì…-->
            </div>
          </div>
        </div>
        <!--ì—¬ê¸°ê¹Œì§€ ë³µë¶™ì™„ë£Œ-->


        <div class="mainbody">
        <!-- ì—¬ê¸°ê¹Œì§€ëŠ” ê³ ì • -->

          <!-- â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  -->
          <!-- ì—¬ê¸°ë¶€í„° ìˆ˜ì • ì‹œì‘ -->
          <div class="info-up-area">
            <div class="card">
              <div class="card-image"></div>
              <div class="card-text">
                <div class="text">
                  <div class="text-up-area">
                    <div class="store-name"></div>
                    <div class="rating">
                      <div class="rating2"></div>
                      <div class="element"></div>
                    </div>
                  </div>
                  <div class="p">
                    <div class="store-simple-info"></div>
                    <div class="personal-check search-margin-bottom">
                      <button type="button" class="heart-button" >
                        <!--<img src="image/heart.png" alt="ì°œí•œ ê°€ê²Œ" id="personal-heart-img"/>-->
                        <div id="personal-heart-img">ğŸ¤</div>
                        <span id="personal-heart">ì°œí•œ ê°€ê²Œ</span>
                      </button>
                      <button type="button" class="bookmark-button">
                        <img src="image/empty-bookmark.png" alt="ë‹¨ê³¨ ê°€ê²Œ" id="bookmark-img"/>
                        <span id="bookmark">ë‹¨ê³¨ ê°€ê²Œ</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="info-down-area">
            <div class="info-tab-list">
              <div class="tab2">
                <a class="label2" id="go-to-info" href="SearchPage (info).html">ì •ë³´</a>
              </div>
              <div class="tab2">
                <a class="label2" id="go-to-menu" href="SearchPage (menu).html">ë©”ë‰´</a>
              </div>
              <div class="tab">
                <a class="label" id="go-to-review" href="SearchPage (review).html">ë¦¬ë·°</a>
              </div>
            </div>
            <div class="review-main-content">
              <button type="button" id="review-link" class="review-upload-button btn btn-dark">
                <div class="review-upload-button-text" >ë¦¬ë·° ì—…ë¡œë“œ</div>
              </button>
              <div class="review-card"></div>
            </div>
          </div>




          
          <script>
            let store_mainbody = [];
          
            window.addEventListener('DOMContentLoaded', () => {
              const urlParams = new URLSearchParams(window.location.search);
              const storeId = urlParams.get('id');
          
              // review-link í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡ (ìš”ì†Œê°€ ìˆìœ¼ë©´)
              const reviewLink = document.getElementById('review-link');
              if (reviewLink) {
                reviewLink.addEventListener('click', () => {
                  if (storeId) {
                    window.location.href = `SearchPage (review-upload).html?id=${storeId}`;
                  } else {
                    alert('ì‹ë‹¹ IDê°€ ì—†ìŠµë‹ˆë‹¤.');
                    window.location.href = `SearchPage.html`;
                  }
                });
              } else {
                console.warn('review-link ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
              }
          
              // ê°€ê²Œ ì •ë³´ JSON ë¡œë“œ ë° í™”ë©´ ë Œë”ë§
              fetch('stores.json')
                .then(res => res.json())
                .then(data => {
                  store_mainbody = data;
                  const store = store_mainbody.find(s => s.id === storeId);
          
                  if (!store) {
                    alert('í•´ë‹¹ ê°€ê²Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                  }
          
                  document.querySelector('.card-image').style.backgroundImage = `url(${store.image})`;
          
                  document.querySelector('#go-to-info').href = `SearchPage (info).html?id=${storeId}`;
                  document.querySelector('#go-to-menu').href = `SearchPage (menu).html?id=${storeId}`;
                  document.querySelector('#go-to-review').href = `SearchPage (review).html?id=${storeId}`;
          
                  document.querySelector('.store-name').textContent = store.name;
                  document.querySelector('.element').textContent = store.rating.toFixed(1);
                  document.querySelector('.store-simple-info').textContent =
                    `${store.type} | í•™êµ ê¸°ì¤€ ${store.distance}ë¶„ | ${store.price.toLocaleString()}ì›`;
          
                  renderStars(store.rating);
                })
                .catch(err => console.error('JSON ë¡œë”© ì‹¤íŒ¨:', err));
          
              // IndexedDBì—ì„œ ë¦¬ë·° ë¶ˆëŸ¬ì™€ ë Œë”ë§
              const container = document.querySelector('.review-main-content');
              const uploadButton = container.querySelector('.review-upload-button');
          
              // ë¦¬ë·° ì˜ì—­ ì´ˆê¸°í™” í›„ ì—…ë¡œë“œ ë²„íŠ¼ ë‹¤ì‹œ ì¶”ê°€
              container.innerHTML = '';
              if (uploadButton) container.appendChild(uploadButton);
          
              const request = indexedDB.open("ReviewDB", 2);
          
              request.onerror = (event) => {
  alert("ë¦¬ë·° ë°ì´í„°ë² ì´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨");
  console.error("IndexedDB open error:", event.target.error);
};
          
              request.onsuccess = (event) => {
                const db = event.target.result;
                const tx = db.transaction("reviews", "readonly");
                const store = tx.objectStore("reviews");
                const getAllRequest = store.getAll();
          
                getAllRequest.onsuccess = () => {
                  let reviews = getAllRequest.result;
          
                  if (storeId) {
                    reviews = reviews.filter(review => review.storeId === storeId);
                  }
          
                  if (reviews.length === 0) {
                    const noReviewMsg = document.createElement('div');
                    noReviewMsg.textContent = "ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.";
                    noReviewMsg.classList.add('no-review-msg');
                    noReviewMsg.style.textAlign = 'center';
                    noReviewMsg.style.padding = '2rem 0 3rem 0';
                    container.appendChild(noReviewMsg);
                  } else {
                    reviews.forEach(review => {
                      const card = createReviewCard(review);
                      container.appendChild(card);
                    });
                  }
                };
              };
            });
          
            // --- ì´í•˜ ë¦¬ë·° ì¹´ë“œ ìƒì„±, ëª¨ë‹¬ ë“± í•¨ìˆ˜ëŠ” ê¸°ì¡´ ê·¸ëŒ€ë¡œ ìœ ì§€ ---
          
            function createReviewCard(review) {
              const card = document.createElement('div');
              card.className = 'review-card';
          
              let starsHtml = '';
              const starCount = Math.round(review.rating);
              for (let i = 1; i <= 5; i++) {
                const starSrc = i <= starCount
                  ? "https://c.animaapp.com/kjYfscdy/img/star-60.svg"
                  : "https://c.animaapp.com/kjYfscdy/img/star-59.svg";
                starsHtml += `<img class="small-star" src="${starSrc}" />`;
              }
          
              let imagesHtml = '';
              if (review.images && review.images.length > 0) {
                imagesHtml = review.images
                  .map(src => `<div class="review-image"><img class="review-img" src="${src}" alt="ë¦¬ë·° ì´ë¯¸ì§€" data-src="${src}" style="cursor:pointer" /></div>`)
                  .join('');
              }
          
              let innerHtml = '';
          
              if (review.title && review.content) {
                innerHtml = `
                  <div class="review-left-up">
                    <div class="small-rating">${starsHtml}</div>
                    <div class="review-text">${review.title}</div>
                  </div>
                  <div class="review-left-down" style="display:flex; align-items:flex-start; gap:0.5rem;">
                    <div id="review-writer" style="width: calc(20vh + 1vw);">${review.nickname}</div>
                    <div class="review-content">${review.content}</div>
                  </div>
                `;
              } else if (review.title && !review.content) {
                innerHtml = `
                  <div class="review-left-up">
                    <div class="small-rating">${starsHtml}</div>
                    <div class="review-text">${review.title}</div>
                  </div>
                  <div class="review-left-down" style="display:flex; align-items:center; gap:0.5rem;">
                    <div id="review-writer" style="width: calc(20vh + 1.4vw);">${review.nickname}</div>
                  </div>
                `;
              } else if (!review.title && review.content) {
                innerHtml = `
                  <div class="review-left-up" style="display:flex; align-items:flex-start; gap:0.5rem;">
                    <div class="small-rating">${starsHtml}</div>
                    <div class="review-content">${review.content}</div>
                  </div>
                  <div class="review-left-down" style="display:flex; align-items:center; gap:0.5rem;">
                    <div id="review-writer" style="width: calc(20vh + 1.4vw);">${review.nickname}</div>
                  </div>
                `;
              } else {
                innerHtml = `
                  <div class="review-left-up" style="display:flex; align-items:center; gap:0.5rem;">
                    <div class="small-rating">${starsHtml}</div>
                  </div>
                  <div class="review-left-down" style="display:flex; align-items:center; gap:0.5rem;">
                    <div id="review-writer" style="width: calc(20vh + 1.4vw);">${review.nickname}</div>
                  </div>
                `;
              }
          
              card.innerHTML = `
                <div class="review-left">
                  ${innerHtml}
                </div>
                <div class="review-right">
                  ${imagesHtml}
                </div>
              `;
          
              const imgs = card.querySelectorAll('.review-img');
              const imageSrcs = review.images || [];
          
              imgs.forEach((img, idx) => {
                img.style.cursor = 'pointer';
                img.addEventListener('click', () => {
                  showModal(imageSrcs[idx], imageSrcs, idx);
                });
              });
          
              return card;
            }
          
            function showModal(imgSrc, allImgs, currentIndex) {
              let existingModal = document.getElementById('image-modal');
              if (existingModal) {
                existingModal.remove();
              }
          
              const modal = document.createElement('div');
              modal.id = 'image-modal';
              Object.assign(modal.style, {
                position: 'fixed',
                top: 0, left: 0,
                width: '100vw', height: '100vh',
                backgroundColor: 'rgba(0,0,0,0.8)',
                display: 'flex',
                justifyContent: 'center',
                alignItems: 'center',
                zIndex: 10000,
                cursor: 'zoom-out',
              });
          
              const modalImg = document.createElement('img');
              modalImg.src = imgSrc;
              Object.assign(modalImg.style, {
                maxWidth: '90vw',
                maxHeight: '90vh',
                borderRadius: '8px',
                boxShadow: '0 0 15px rgba(0,0,0,0.5)',
                cursor: 'default',
              });
              modal.appendChild(modalImg);
          
              const leftArrow = document.createElement('div');
              leftArrow.textContent = 'â—€';
              Object.assign(leftArrow.style, {
                position: 'absolute',
                left: '2rem',
                top: '50%',
                transform: 'translateY(-50%)',
                fontSize: '3rem',
                color: 'white',
                userSelect: 'none',
                cursor: 'pointer',
                zIndex: 10001,
              });
              modal.appendChild(leftArrow);
          
              const rightArrow = document.createElement('div');
              rightArrow.textContent = 'â–¶';
              Object.assign(rightArrow.style, {
                position: 'absolute',
                right: '2rem',
                top: '50%',
                transform: 'translateY(-50%)',
                fontSize: '3rem',
                color: 'white',
                userSelect: 'none',
                cursor: 'pointer',
                zIndex: 10001,
              });
              modal.appendChild(rightArrow);
          
              function updateImage(index) {
                if (index < 0) index = allImgs.length - 1;
                if (index >= allImgs.length) index = 0;
                currentIndex = index;
                modalImg.src = allImgs[currentIndex];
              }
          
              leftArrow.addEventListener('click', (e) => {
                e.stopPropagation();
                updateImage(currentIndex - 1);
              });
          
              rightArrow.addEventListener('click', (e) => {
                e.stopPropagation();
                updateImage(currentIndex + 1);
              });
          
              modal.addEventListener('click', () => {
                modal.remove();
              });
          
              document.body.appendChild(modal);
            }
          </script>
          
               
          
              <script>////////íšŒì›/ë¹„íšŒì› ì „í™˜///////////////////////
                function logout() {
                 const confirmed = confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
                if (!confirmed) return;
          
                localStorage.removeItem("currentUser");
                updateAsideToGuest();
                renderButtonGroup(); // ë²„íŠ¼ ê·¸ë£¹ë„ ì—…ë°ì´íŠ¸
                window.location.href = "index.html";
          
              }
          
                // íšŒì› UI
                function updateAsideToMember(currentUser) {
                  const aside = document.querySelector(".aside");
                  if (!aside) return;
                  // postCount ê¸°ì¤€ìœ¼ë¡œ ë“±ê¸‰ ì´ë¯¸ì§€ ê²°ì •
                  const postCount = currentUser.postCount || 0;
                  let gradeImgSrc = "image/avatar.png"; // ê¸°ë³¸
          
                  if (postCount >= 40) {
                    gradeImgSrc = "image/avatar_level4.png";
                  } else if (postCount >= 25) {
                    gradeImgSrc = "image/avatar_level3.png";
                  } else if (postCount >= 10) {
                    gradeImgSrc = "image/avatar_level2.png"; // ìˆìœ¼ë©´ ë„£ê³ , ì—†ìœ¼ë©´ ê¸°ë³¸ìœ¼ë¡œ
                  } else {
                    gradeImgSrc = "image/avatar.png";
                  }
          
                  const gradeImgMobile = document.getElementById("grade-img-mobile");
                  if (gradeImgMobile) gradeImgMobile.src = gradeImgSrc;
          
                  aside.innerHTML = `
                    <div class="account" style="height: 38.69vh;">
                      <div class="account-image"></div>
                      <div class="account-inf">
                          <img src="${gradeImgSrc}" alt="ë“±ê¸‰" id="grade-img"/>
                          <span class="account-detail-nickname">${currentUser.nickname}</span>
                      </div>
                      <div class="account-description">
                        <div>
                          <a class="move-inf" href="MyPage (check).html?tab=post">ë‚´ê²Œì‹œë¬¼</a> | 
                          <a class="move-inf" href="MyPage (check).html?tab=chat">ë‚´ëŒ“ê¸€</a> | 
                          <a class="move-inf" href="MyPage (check).html?tab=review">ë‚´ë¦¬ë·°</a>
                        </div>
                        <a class="move-inf" href="MyPage (check).html">ë‚´ì •ë³´ í™•ì¸</a>
                      </div>
                    </div>
                    <a class="view-heart" href="MyPage (check).html?tab=wishlist">
                      <img src="image/heart.png" alt="ì°œí•œ ê°€ê²Œ" id="heart-img"/>
                      <span id="heart">ì°œí•œ ê°€ê²Œ</span>
                    </a>
                  `;
                }
          
                // ë¹„íšŒì› aside UI
                function updateAsideToGuest() {
                const aside = document.querySelector(".aside");
                if (!aside) return;
                aside.innerHTML = `
                  <div class="account" style="height: 45.69vh;">
                    <div style="display:flex; flex-direction:column; align-items: center;">
                      <div class="account-image"></div>
                      <br />
                      <div class="div3">ë¹„íšŒì› ì ‘ì† ì¤‘ì…ë‹ˆë‹¤.</div>
                    </div>
                    <button type="button" class="button btn btn-dark" onclick="location.href='signup.html'">ë¡œê·¸ì¸/íšŒì›ê°€ì…</button>
                  </div>
                `;
          
                ////////////////////(ìˆ˜ì •:ëª¨ë°”ì¼ì¼ë•Œ ë¹„íšŒì› ì ìš©) ì´ë¶€ë¶„ë¶€í„°~ ///////////////
                const nicknameEls = document.querySelectorAll(".account-detail-nickname");
                nicknameEls.forEach(el => {
                  el.textContent = "ë¹„íšŒì› ì ‘ì† ì¤‘ì…ë‹ˆë‹¤.";
                });
                const logoutContainer = document.querySelector("#logout-button")?.parentElement;
                if (logoutContainer) {
                  logoutContainer.innerHTML = `
                   
                    <button id="logout-button" class="button" onclick="location.href='signup.html'">
                      <img class="logout-img" src="image/logout.png">
                      <span class="logout-text">ë¡œê·¸ì¸</span>
                    </button>
                  `;
                }///////////~ì—¬ê¸°ê¹Œì§€ ì¶”ê°€//////////////
            }
          
              // íšŒì› UI
              function ReviewUploadToMember(currentUser) {
                const reviewUpload = document.querySelector(".review-upload-button");
                if (!reviewUpload) return;
          
                reviewUpload.innerHTML = `
                  <div class="review-upload-button-text">ë¦¬ë·° ì—…ë¡œë“œ</div>
                `;
              }
          
              // ë¹„íšŒì› review-upload-button UI
              function ReviewUploadToGuest() {
              const reviewUpload = document.querySelector(".review-upload-button");
              if (!reviewUpload) return;
              reviewUpload.remove();
              }
          
          
                function renderButtonGroup() {
                const currentUser = JSON.parse(localStorage.getItem("currentUser"));
                const buttonGroup = document.getElementById("buttonGroup");
                if (!buttonGroup) return;
          
                if (currentUser && currentUser.nickname) {
                  buttonGroup.innerHTML = `
                    <button type="button" class="btn btn-light" onclick="location.href='ì»¤ë®¤ë‹ˆí‹°.html'">ì»¤ë®¤ë‹ˆí‹°</button>
                    <button type="button" class="btn btn-light" onclick="location.href='ë­í‚¹.html'">ë­í‚¹</button>
                    <button type="button" class="btn btn-light" onclick="location.href='MyPage (check).html?tab=wishlist'">ì°œ</button>
                    <button type="button" class="btn btn-light" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                  `;
                } else {
                  buttonGroup.innerHTML = `
                    <button type="button" class="btn btn-light" onclick="location.href='ì»¤ë®¤ë‹ˆí‹°.html'">ì»¤ë®¤ë‹ˆí‹°</button>
                    <button type="button" class="btn btn-light" onclick="location.href='ë­í‚¹.html'">ë­í‚¹</button>
                    <button type="button" class="btn btn-light" onclick="location.href='signup.html'">ë¡œê·¸ì¸/íšŒì›ê°€ì…</button>
                  `;
                }
              }
          
              // í˜ì´ì§€ ë¡œë“œ ì‹œ UI ì´ˆê¸°í™”
              document.addEventListener("DOMContentLoaded", () => {
                const currentUser = JSON.parse(localStorage.getItem("currentUser"));
                if (currentUser && currentUser.nickname) {
                  updateAsideToMember(currentUser);
                  ReviewUploadToMember(currentUser)
                } else {
                  updateAsideToGuest();
                  ReviewUploadToGuest()
                }
                renderButtonGroup(); // ë²„íŠ¼ë„ ë Œë”ë§
              });
              </script>
          
          
                    
                    <!-- ì—¬ê¸°ê¹Œì§€ ìˆ˜ì • ì™„ë£Œ -->
                    <!-- â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  -->
          
                    <!-- ì—¬ê¸°ë¶€í„°ëŠ” ê³ ì • -->
                    <footer>
                      <div class="text-link-list">
                        <div class="top-area-in-footer">
                          <div class="text-strong">
                            <div class="text-strong2">Web assistant</div>
                          </div>
                        </div>
                        <div class="text-link-list-item">
                          <a class="text-link-list-item" href="ê°œë°œìì •ë³´.html">ê°œë°œìì •ë³´</a>
                        </div>
                        <div class="text-link-list-item">
                          <div class="list-item2">ì›¹ì‚¬ì´íŠ¸ ì´ìš© ë°©ë²•</div>
                        </div>
                        <a class="text-link-list-item" href="ReportPage.html">
                          <div class="list-item2">ì•…ì„± ìœ ì € ì‹ ê³ </div>
                        </a>
                      </div>
                      <div class="vertical-line"></div>
                      <div class="horizontal-line"></div>
                      <div class="text-link-list">
                        <div class="top-area-in-footer">
                          <div class="text-strong">
                            <div class="text-strong2">Sookmyung University</div>
                          </div>
                        </div>
                        <a class="text-link-list-item" href="https://www.sookmyung.ac.kr/kr/index.do">ìˆ™ëª…ì—¬ìëŒ€í•™êµ í™ˆí˜ì´ì§€</a>
                        <a class="text-link-list-item" href="https://snowboard.sookmyung.ac.kr/login/index.php">ìŠ¤ë…¸ìš°ë³´ë“œ</a>
                        <a class="text-link-list-item" href="https://portal.sookmyung.ac.kr/irj/portal">ìˆ™ëª…í¬í„¸</a>
                      </div>
                    </footer>
                  </div>
                </div>
              </div>
          
              
              
          
              
          
              <script>
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser && currentUser.nickname) {
                document.querySelector('.account-detail-nickname').innerHTML = currentUser.nickname;
                }
              </script>
          
              <script>//í•´ë‹¹ ì‹ë‹¹ì˜ ì •ë³´ ë³´ì—¬ì£¼ê¸°
      
    function renderStars(rating) {
    const fullStar = 'https://c.animaapp.com/kjYfscdy/img/star-63.svg';
    const halfStar = 'https://c.animaapp.com/kjYfscdy/img/star-61.svg'; // ë°˜ë³„ ì•„ì´ì½˜ ì˜ˆì‹œ (ì—†ìœ¼ë©´ ê·¸ëƒ¥ fullStar ëŒ€ì²´ ê°€ëŠ¥)
    const emptyStar = 'https://c.animaapp.com/kjYfscdy/img/star-59.svg';

    const starsContainer = document.querySelector('.rating2');
    starsContainer.innerHTML = ''; // ê¸°ì¡´ ë³„ ì œê±°

    const fullCount = Math.floor(rating);
    const hasHalf = rating - fullCount >= 0.5;
    const emptyCount = 5 - fullCount - (hasHalf ? 1 : 0);

    for (let i = 0; i < fullCount; i++) {
      const img = document.createElement('img');
      img.className = 'star';
      img.src = fullStar;
      starsContainer.appendChild(img);
    }
    if (hasHalf) {
      const img = document.createElement('img');
      img.className = 'star';
      img.src = halfStar;
      starsContainer.appendChild(img);
    }
    for (let i = 0; i < emptyCount; i++) {
      const img = document.createElement('img');
      img.className = 'star';
      img.src = emptyStar;
      starsContainer.appendChild(img);
    }
  }
</script>

<script>
// ì°œ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
function getfavorite() {
  const fav = localStorage.getItem('favorite');
  return fav ? JSON.parse(fav) : [];
}

// ì°œ ëª©ë¡ ì €ì¥
function savefavorite(favorite) {
  localStorage.setItem('favorite', JSON.stringify(favorite));
}

// ì°œ ì—¬ë¶€ í™•ì¸ í•¨ìˆ˜
function isFavorited(storeId, userId) {
  const favorite = getfavorite();
  return favorite.some(fav => fav.id === storeId && fav.userId === userId);
}

// í•˜íŠ¸ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateHeartIcon(isFav) {
  const heartImg = document.getElementById('personal-heart-img');
  if (!heartImg) return;
  if (isFav) {
    heartImg.innerHTML = "â¤ï¸";
  } else {
    heartImg.innerHTML = "ğŸ¤";
  }
}

// ì°œ ì¶”ê°€/ì œê±° í•¨ìˆ˜
function toggleFavorite(store, userId) {
  const favorite = getfavorite();

  const existsIndex = favorite.findIndex(
    fav => fav.id === store.id && fav.userId === userId
  );

  let isFav;

  if (existsIndex === -1) {
    favorite.push({ ...store, userId }); // ì°œ ì¶”ê°€
    savefavorite(favorite);
    alert('ì°œí•œ ê°€ê²Œì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
    isFav = true;
  } else {
    favorite.splice(existsIndex, 1); // ì°œ ì œê±°
    savefavorite(favorite);
    alert('ì°œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    isFav = false;
  }

  updateHeartIcon(isFav); // ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
}

// ì°œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
document.querySelector('.heart-button').addEventListener('click', () => {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  if (!currentUser) {
    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    return;
  }

  const urlParams = new URLSearchParams(window.location.search);
  const storeId = urlParams.get('id');

  fetch('stores.json')
    .then(res => res.json())
    .then(data => {
      const store = data.find(s => s.id === storeId);
      if (!store) {
        alert('í•´ë‹¹ ê°€ê²Œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }

      toggleFavorite(store, currentUser.id);
    })
    .catch(err => {
      console.error('ì‹ë‹¹ ì •ë³´ ë¡œë”© ì‹¤íŒ¨:', err);
      alert('ì°œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
    });
});

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì°œ ìƒíƒœ ë°˜ì˜
window.addEventListener('DOMContentLoaded', () => {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  const urlParams = new URLSearchParams(window.location.search);
  const storeId = urlParams.get('id');

  if (currentUser && storeId) {
    const isFav = isFavorited(storeId, currentUser.id);
    updateHeartIcon(isFav); // í˜ì´ì§€ ë¡œë“œì‹œ ì°œ ì´ë¯¸ì§€ ì´ˆê¸°í™”
  }
});

    </script>



<script>//í•´ë‹¹ ì‹ë‹¹ì˜ ì •ë³´ ë³´ì—¬ì£¼ê¸°
      
  function renderStars(rating) {
  const fullStar = 'https://c.animaapp.com/kjYfscdy/img/star-63.svg';
  const halfStar = 'https://c.animaapp.com/kjYfscdy/img/star-61.svg'; // ë°˜ë³„ ì•„ì´ì½˜ ì˜ˆì‹œ (ì—†ìœ¼ë©´ ê·¸ëƒ¥ fullStar ëŒ€ì²´ ê°€ëŠ¥)
  const emptyStar = 'https://c.animaapp.com/kjYfscdy/img/star-59.svg';

  const starsContainer = document.querySelector('.rating2');
  starsContainer.innerHTML = ''; // ê¸°ì¡´ ë³„ ì œê±°

  const fullCount = Math.floor(rating);
  const hasHalf = rating - fullCount >= 0.5;
  const emptyCount = 5 - fullCount - (hasHalf ? 1 : 0);

  for (let i = 0; i < fullCount; i++) {
    const img = document.createElement('img');
    img.className = 'star';
    img.src = fullStar;
    starsContainer.appendChild(img);
  }
  if (hasHalf) {
    const img = document.createElement('img');
    img.className = 'star';
    img.src = halfStar;
    starsContainer.appendChild(img);
  }
  for (let i = 0; i < emptyCount; i++) {
    const img = document.createElement('img');
    img.className = 'star';
    img.src = emptyStar;
    starsContainer.appendChild(img);
  }
}
</script>

<script>
// ì°œ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
function getfavorite() {
const fav = localStorage.getItem('favorite');
return fav ? JSON.parse(fav) : [];
}

// ì°œ ëª©ë¡ ì €ì¥
function savefavorite(favorite) {
localStorage.setItem('favorite', JSON.stringify(favorite));
}

// ì°œ ì—¬ë¶€ í™•ì¸ í•¨ìˆ˜
function isFavorited(storeId, userId) {
const favorite = getfavorite();
return favorite.some(fav => fav.id === storeId && fav.userId === userId);
}

// í•˜íŠ¸ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateHeartIcon(isFav) {
const heartImg = document.getElementById('personal-heart-img');
if (!heartImg) return;
if (isFav) {
  heartImg.innerHTML = "â¤ï¸";
} else {
  heartImg.innerHTML = "ğŸ¤";
}
}

// ì°œ ì¶”ê°€/ì œê±° í•¨ìˆ˜
function toggleFavorite(store, userId) {
const favorite = getfavorite();

const existsIndex = favorite.findIndex(
  fav => fav.id === store.id && fav.userId === userId
);

let isFav;

if (existsIndex === -1) {
  favorite.push({ ...store, userId }); // ì°œ ì¶”ê°€
  savefavorite(favorite);
  alert('ì°œí•œ ê°€ê²Œì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
  isFav = true;
} else {
  favorite.splice(existsIndex, 1); // ì°œ ì œê±°
  savefavorite(favorite);
  alert('ì°œì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
  isFav = false;
}

updateHeartIcon(isFav); // ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
}

// ì°œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
document.querySelector('.heart-button').addEventListener('click', () => {
const currentUser = JSON.parse(localStorage.getItem('currentUser'));
if (!currentUser) {
  alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
  return;
}

const urlParams = new URLSearchParams(window.location.search);
const storeId = urlParams.get('id');

fetch('stores.json')
  .then(res => res.json())
  .then(data => {
    const store = data.find(s => s.id === storeId);
    if (!store) {
      alert('í•´ë‹¹ ê°€ê²Œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    toggleFavorite(store, currentUser.id);
  })
  .catch(err => {
    console.error('ì‹ë‹¹ ì •ë³´ ë¡œë”© ì‹¤íŒ¨:', err);
    alert('ì°œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
  });
});

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì°œ ìƒíƒœ ë°˜ì˜
window.addEventListener('DOMContentLoaded', () => {
const currentUser = JSON.parse(localStorage.getItem('currentUser'));
const urlParams = new URLSearchParams(window.location.search);
const storeId = urlParams.get('id');

if (currentUser && storeId) {
  const isFav = isFavorited(storeId, currentUser.id);
  updateHeartIcon(isFav); // í˜ì´ì§€ ë¡œë“œì‹œ ì°œ ì´ë¯¸ì§€ ì´ˆê¸°í™”
}
});

  </script>



<script>
const DB_NAME = 'MyStoreDB';
const STORE_NAME = 'stores';
const DB_VERSION = 2;

// IndexedDB ì—´ê¸° (DBì™€ objectStore ì¤€ë¹„)
function openDB() {
  return new Promise((resolve, reject) => {
    const request = indexedDB.open(DB_NAME, DB_VERSION);

    request.onupgradeneeded = (event) => {
      const db = event.target.result;
      if (!db.objectStoreNames.contains(STORE_NAME)) {
        db.createObjectStore(STORE_NAME, { keyPath: 'id' });
      }
    };

    request.onsuccess = () => resolve(request.result);
    request.onerror = () => reject(request.error);
  });
}

// stores.jsonì—ì„œ ë°ì´í„° ê°€ì ¸ì™€ IndexedDBì— ì €ì¥ (ì´ˆê¸°í™”ìš©)
async function initStoresInDB() {
  const db = await openDB();

  return new Promise(async (resolve, reject) => {
    const tx = db.transaction(STORE_NAME, 'readonly');
    const store = tx.objectStore(STORE_NAME);

    // ë¨¼ì € ë°ì´í„°ê°€ ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸ (ì¤‘ë³µ ì €ì¥ ë°©ì§€)
    const countRequest = store.count();
    countRequest.onsuccess = async () => {
      if (countRequest.result > 0) {
        // ì´ë¯¸ ë°ì´í„°ê°€ ìˆìœ¼ë‹ˆ ì´ˆê¸°í™”í•˜ì§€ ì•ŠìŒ
        resolve();
      } else {
        try {
          const response = await fetch('stores.json');
          const stores = await response.json();

          const txWrite = db.transaction(STORE_NAME, 'readwrite');
          const storeWrite = txWrite.objectStore(STORE_NAME);

          for (const s of stores) {
            storeWrite.put(s);
          }

          txWrite.oncomplete = () => resolve();
          txWrite.onerror = () => reject(txWrite.error);
        } catch (err) {
          reject(err);
        }
      }
    };
    countRequest.onerror = () => reject(countRequest.error);
  });
}

// IndexedDBì—ì„œ íŠ¹ì • ìƒì  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
async function getStore(storeId) {
  const db = await openDB();

  return new Promise((resolve, reject) => {
    const tx = db.transaction(STORE_NAME, 'readonly');
    const store = tx.objectStore(STORE_NAME);

    const request = store.get(storeId);
    request.onsuccess = () => resolve(request.result);
    request.onerror = () => reject(request.error);
  });
}

// IndexedDBì—ì„œ íŠ¹ì • ìƒì  ë°ì´í„° ì—…ë°ì´íŠ¸
async function updateStore(store) {
const db = await openDB();

return new Promise((resolve, reject) => {
  const tx = db.transaction(STORE_NAME, 'readwrite');
  const storeObj = tx.objectStore(STORE_NAME);

  const request = storeObj.put(store);
  request.onerror = () => reject(request.error);

  tx.oncomplete = () => resolve();
  tx.onerror = () => reject(tx.error);
});
}

// localStorageì—ì„œ ë‹¨ê³¨ ê°€ê²Œ ë°°ì—´ ë¶ˆëŸ¬ì˜¤ê¸°
function getBookmarks() {
  const bookmarks = localStorage.getItem('bookmarks');
  return bookmarks ? JSON.parse(bookmarks) : [];
}

// localStorageì— ë‹¨ê³¨ ê°€ê²Œ ë°°ì—´ ì €ì¥í•˜ê¸°
function saveBookmarks(bookmarks) {
  localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
}

// ë‹¨ê³¨ ì—¬ë¶€ í™•ì¸ í•¨ìˆ˜
function isBookmarked(storeId) {
  const bookmarks = getBookmarks();
  return bookmarks.includes(storeId);
}

// ë¶ë§ˆí¬ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì±„ìš´/í…Œë‘ë¦¬)
function updateBookmarkIcon(isBookmarked) {
  const img = document.getElementById('bookmark-img');
  if (!img) return;

  img.src = isBookmarked ? 'image/full-bookmark.png' : 'image/empty-bookmark.png';
}

// IndexedDBì—ì„œ ë‹¨ê³¨ ìˆ˜ +1 í•´ì£¼ëŠ” í•¨ìˆ˜
async function incrementBookmarkCount(storeId) {
  const store = await getStore(storeId);
  if (!store) throw new Error('ê°€ê²Œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');

  store.bookmark = (store.bookmark || 0) + 1;
  await updateStore(store);
}

// IndexedDBì—ì„œ ë‹¨ê³¨ ìˆ˜ -1 í•´ì£¼ëŠ” í•¨ìˆ˜
async function decrementBookmarkCount(storeId) {
  const store = await getStore(storeId);
  if (!store) throw new Error('ê°€ê²Œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');

  store.bookmark = Math.max((store.bookmark || 1) - 1, 0);
  await updateStore(store);
}

// í´ë¦­ ì‹œ ë‹¨ê³¨ ê°€ê²Œ ì¶”ê°€/ì œê±° í† ê¸€ í•¨ìˆ˜ (async)
async function toggleBookmark(storeId) {
  let bookmarks = getBookmarks();

  if (bookmarks.includes(storeId)) {
    bookmarks = bookmarks.filter(id => id !== storeId);
    saveBookmarks(bookmarks);
    alert('ë‹¨ê³¨ ê°€ê²Œì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.');
    updateBookmarkIcon(false);

    try {
      await decrementBookmarkCount(storeId);
      console.log('IndexedDB ë‹¨ê³¨ ìˆ˜ -1 ì™„ë£Œ');
    } catch (err) {
      console.error(err);
    }
  } else {
    bookmarks.push(storeId);
    saveBookmarks(bookmarks);
    alert('ë‹¨ê³¨ ê°€ê²Œì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
    updateBookmarkIcon(true);

    try {
      await incrementBookmarkCount(storeId);
      console.log('IndexedDB ë‹¨ê³¨ ìˆ˜ +1 ì™„ë£Œ');
    } catch (err) {
      console.error(err);
    }
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë‹¨ê³¨ ì—¬ë¶€ì— ë”°ë¼ ì•„ì´ì½˜ ì´ˆê¸°í™”
async function initBookmark(storeId) {
  updateBookmarkIcon(isBookmarked(storeId));
}

(async () => {
  try {
    // IndexedDB ì´ˆê¸°í™” (ì¤‘ë³µ ì €ì¥ ë°©ì§€)
    await initStoresInDB();

    // ì‹¤ì œ storeId
    const params = new URLSearchParams(window.location.search);
    const storeId = params.get('id');

    if (!storeId) {
      console.error('URLì— storeIdê°€ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    // ë¶ë§ˆí¬ ì•„ì´ì½˜ ìƒíƒœ ì´ˆê¸°í™”
    await initBookmark(storeId);

    // í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡ (id='bookmark' ë²„íŠ¼ ë˜ëŠ” imgì—)
    const bookmarkElem = document.getElementById('bookmark');
    if (bookmarkElem) {
      bookmarkElem.addEventListener('click', async () => {
        await toggleBookmark(storeId);
      });
    } else {
      console.warn('id="bookmark" ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
  } catch (e) {
    console.error('ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', e);
  }
})();
</script>




    <script>
      let store_aside2=[];
        function renderAside(sortedArray) {
          const top7 = sortedArray.slice(0, 7);
          renderAsideStores(top7);
        }
        function handleSortAside(criteria) {
          const sorted = getSortedStores(criteria);
          renderAside(sorted);
        }

         //sort í•¨ìˆ˜(aside2/mainbody ê³µí†µ)
        function getSortedStores(criteria = "rating") {
        return [...store_aside2].sort((a, b) => {
          if (b[criteria] !== a[criteria]) return b[criteria] - a[criteria];

          if (criteria === "rating")    return b.reviews - a.reviews || b.bookmark - a.bookmark;
          if (criteria === "reviews")   return b.rating  - a.rating  || b.bookmark - a.bookmark;
          if (criteria === "bookmark") return b.rating  - a.rating  || b.reviews  - a.reviews;
          return 0;
        });
      }

      //asideë Œë”ë§
        function renderAsideStores(sortedArray) {
        const top7 = sortedArray.slice(0, 7);
        const asideEl = document.getElementById("store-sort");

        asideEl.innerHTML = `
        <ul class="store-list">
          ${top7.map((store, index) => `
            <li class="store-item">
              <div class="store-rank-name">
                <div class="rank-circle">${index + 1}</div>
                <span class="store-name-aside">${store.name}</span>
              </div>
              <span class="store-rating">
                <img src="https://c.animaapp.com/kjYfscdy/img/star-60.svg" style="width:20px; height:100%; margin-bottom:3px;" />
                ${store.rating.toFixed(1)}
              </span>
            </li>
          `).join('')}
        </ul>
      `;
    }
    

    window.addEventListener('DOMContentLoaded', () => {/////////////(2) onloadë¹¼ê³  ì´ê±°
    fetch('stores.json')       
      .then(res => res.json())
      .then(data => {
        store_aside2= data;
        const sorted = getSortedStores("rating");
        renderAsideStores(sorted);
      })
      .catch(err => console.error('JSON ë¡œë”© ì‹¤íŒ¨:', err));
  });/////////////aside2ìˆ˜ì •ì™„ë£Œ///////////////
    </script>




    <!-- sl-tab ë°”ë¡œê°€ê¸°ì™€ ê´€ë ¨í•œ ìë°” ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);
        const tabToShow = urlParams.get("tab");

        if (tabToShow) {
          const tabGroup = document.querySelector("sl-tab-group");
          if (tabGroup) {
            tabGroup.show(tabToShow); // í•´ë‹¹ panel IDë¥¼ ë³´ì—¬ì¤Œ
          }
        }
      });
    console.log(document.querySelector('.store-name'));

    </script>

    <script>
  // ê³µí†µ ê²€ìƒ‰ í•¨ìˆ˜
  function handleSearch() {
    const keywordInput = document.getElementById("search-form");
    const keyword = encodeURIComponent(keywordInput.value.trim());

    if (keyword) {
      location.href = `SearchPage.html?keyword=${keyword}`;
    } else {
      alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
    }
  }

  // ë²„íŠ¼ í´ë¦­ ì‹œ
  document.getElementById("search-btn").addEventListener("click", handleSearch);

  // ì´ë¯¸ì§€ í´ë¦­ ì‹œ (ì‘ì€ í™”ë©´ì—ì„œë§Œ)
  document.getElementById("search-img").addEventListener("click", () => {
    if (window.innerWidth <= 1024.98) {
      handleSearch();
    }
  });

  // Enter í‚¤ë¡œë„ ê²€ìƒ‰ë˜ê²Œ
  document.getElementById("search-form").addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      handleSearch();
    }
  });
</script>

    <script>
  // DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ ì‹¤í–‰
  document.addEventListener('DOMContentLoaded', function () {
    const popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    popoverTriggerList.forEach(function (popoverTriggerEl) {
      new bootstrap.Popover(popoverTriggerEl, {
        placement: 'right',
        offset: [10, 15],
        content: '<h6>ë‚˜ë§Œì˜ ì‹ë‹¹ì„ ì°¾ì•„ë³´ì„¸ìš”!</h6><p>ì°œìœ¼ë¡œ ë‚˜ë§Œì˜ ì‹ë‹¹ì„ ì°¾ê³ , <br />ë‹¨ê³¨ë¡œ ë‚˜ë§Œì˜ ì‹ë‹¹ì„ ê³µìœ í•˜ì„¸ìš”!</p>',
        html: true,
        trigger: 'hover' })
    })
  });
</script>

    <!-- ì…ë ¥ì°½ì— íŠ¹ì • ë¬¸êµ¬ ì…ë ¥í–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ë¹¨ê°„ ë°‘ì¤„ ì œê±° -->
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const inputs = document.querySelectorAll('input, textarea, [contenteditable]');

      inputs.forEach(el => {
        el.setAttribute('spellcheck', 'false');
        el.setAttribute('autocomplete', 'off');
        el.setAttribute('autocorrect', 'off');       // iOS Safari ë“±ì—ì„œ ìœ ìš©
        el.setAttribute('autocapitalize', 'off');    // ì²« ê¸€ì ìë™ ëŒ€ë¬¸ì ë°©ì§€
      });
  });
    </script>

<script>
  document.querySelector('.bookmark-button').addEventListener('click', () => {
  console.log("ë¶ë§ˆí¬ë²„íŠ¼í´ë¦­ë¨")
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  
  if (!currentUser) {
    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    return;
  }
});
</script>
     
  </body>
</html>